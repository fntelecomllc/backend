Starting DomainFlow Go API server...
Changing directory to: /home/azma/domainflow/backend
Executing ./domainflow-apiserver...
2025/05/19 18:20:57 Config: Main config path set to: config.json
2025/05/19 18:20:57 Config: Main config path set to: config.json
2025/05/19 18:20:57 Config: Warning - Failed to load DNS Personas: error unmarshalling DNS Personas config file 'dns_personas.config.json': invalid character '/' looking for beginning of value. Check JSON syntax.. Server will operate without pre-defined personas available via API, using only default DNS settings for requests without a persona.
2025/05/19 18:20:57 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
2025/05/19 18:20:57 !!! WARNING: API Key is NOT SECURELY CONFIGURED. Using a default value.   !!!
2025/05/19 18:20:57 !!! Please set DOMAINFLOW_API_KEY environment variable or update config.json. !!!
2025/05/19 18:20:57 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
2025/05/19 18:20:57 Starting DomainFlow API server on http://localhost:8080
2025/05/19 18:20:57 API Key configured (length: 64). Ensure this is secured for production.
2025/05/19 18:22:46 Request Start: GET /api/v1/dns/personas [::1]:53878
2025/05/19 18:22:46 Request End: GET /api/v1/dns/personas (Status: 200) [::1]:53878 (Duration: 464.3µs)
2025/05/19 18:22:54 Request Start: POST /api/v1/validate/dns [::1]:55934
2025/05/19 18:22:54 Auth failed: Invalid API Key provided by [::1]:55934 for POST /api/v1/validate/dns. Expected key length: 64, Got key length: 12
2025/05/19 18:22:54 Request End: POST /api/v1/validate/dns (Status: 401) [::1]:55934 (Duration: 267.071µs)
2025/05/19 18:26:11 Request Start: GET /api/v1/dns/personas [::1]:34554
2025/05/19 18:26:11 Request End: GET /api/v1/dns/personas (Status: 200) [::1]:34554 (Duration: 676.856µs)
2025/05/19 18:26:32 Request Start: POST /api/v1/validate/dns [::1]:37442
2025/05/19 18:26:32 API: Warning - DNS Persona ID 'global_balanced_weighted' not found. Falling back to server default DNS config.
2025/05/19 18:26:32 API: Received DNS validation request for 1 domains. Effective DNS Config: {Resolvers:[192.0.2.1:53 https://cloudflare-dns.com/dns-query https://dns.google/dns-query 1.1.1.1:53] UseSystemResolvers:false QueryTimeout:2s MaxDomainsPerRequest:100 ResolverStrategy:sequential_failover ResolversWeighted:map[] ResolversPreferredOrder:[192.0.2.1:53 https://cloudflare-dns.com/dns-query] ConcurrentQueriesPerDomain:1 QueryDelayMin:0s QueryDelayMax:0s MaxConcurrentGoroutines:10 QueryTimeoutSeconds:2 JSONResolvers:[192.0.2.1:53 https://cloudflare-dns.com/dns-query https://dns.google/dns-query 1.1.1.1:53] JSONUseSystemResolvers:false JSONMaxDomainsPerRequest:100 JSONResolverStrategy:sequential_failover JSONResolversWeighted:map[] JSONResolversPreferredOrder:[192.0.2.1:53 https://cloudflare-dns.com/dns-query] JSONConcurrentQueriesPerDomain:1 JSONQueryDelayMinMs:0 JSONQueryDelayMaxMs:0 JSONMaxConcurrentGoroutines:10}
2025/05/19 18:26:32 DNSValidator: Initialized. Strategy: 'sequential_failover'. Active Resolvers Count (for non-weighted or fallback): 2. Weighted List Size (if applicable): 0. Query Timeout: 2s. Concurrent Per Domain: 1. Delay: 0s-0s. Max Batch Goroutines: 10
2025/05/19 18:26:36 DNSValidator: Domain github.com failed with resolver 192.0.2.1:53 (error: lookup github.com: i/o timeout). Retrying with next preferred resolver.
2025/05/19 18:26:36 Request End: POST /api/v1/validate/dns (Status: 200) [::1]:37442 (Duration: 4.188447617s)
2025/05/19 18:27:14 Request Start: POST /api/v1/validate/dns [::1]:45240
2025/05/19 18:27:14 API: No DNS Persona ID provided. Using server default DNS config.
2025/05/19 18:27:14 API: Received DNS validation request for 1 domains. Effective DNS Config: {Resolvers:[192.0.2.1:53 https://cloudflare-dns.com/dns-query https://dns.google/dns-query 1.1.1.1:53] UseSystemResolvers:false QueryTimeout:2s MaxDomainsPerRequest:100 ResolverStrategy:sequential_failover ResolversWeighted:map[] ResolversPreferredOrder:[192.0.2.1:53 https://cloudflare-dns.com/dns-query] ConcurrentQueriesPerDomain:1 QueryDelayMin:0s QueryDelayMax:0s MaxConcurrentGoroutines:10 QueryTimeoutSeconds:2 JSONResolvers:[192.0.2.1:53 https://cloudflare-dns.com/dns-query https://dns.google/dns-query 1.1.1.1:53] JSONUseSystemResolvers:false JSONMaxDomainsPerRequest:100 JSONResolverStrategy:sequential_failover JSONResolversWeighted:map[] JSONResolversPreferredOrder:[192.0.2.1:53 https://cloudflare-dns.com/dns-query] JSONConcurrentQueriesPerDomain:1 JSONQueryDelayMinMs:0 JSONQueryDelayMaxMs:0 JSONMaxConcurrentGoroutines:10}
2025/05/19 18:27:14 DNSValidator: Initialized. Strategy: 'sequential_failover'. Active Resolvers Count (for non-weighted or fallback): 2. Weighted List Size (if applicable): 0. Query Timeout: 2s. Concurrent Per Domain: 1. Delay: 0s-0s. Max Batch Goroutines: 10
2025/05/19 18:27:18 DNSValidator: Domain cloudflare.com failed with resolver 192.0.2.1:53 (error: lookup cloudflare.com: i/o timeout). Retrying with next preferred resolver.
2025/05/19 18:27:18 Request End: POST /api/v1/validate/dns (Status: 200) [::1]:45240 (Duration: 4.13238409s)
